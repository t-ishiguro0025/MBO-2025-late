Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const browser = require('@sentry/browser');
const createClientInstrumentation = require('./createClientInstrumentation.js');
const hydratedRouter = require('./hydratedRouter.js');

/**
 * Options for the React Router tracing integration.
 */

/**
 * Browser tracing integration for React Router (Framework) applications.
 * This integration will create navigation spans and enhance transaction names with parameterized routes.
 */
function reactRouterTracingIntegration(
  options = {},
) {
  const browserTracingIntegrationInstance = browser.browserTracingIntegration({
    // Navigation transactions are started within the hydrated router instrumentation
    instrumentNavigation: false,
  });

  let clientInstrumentationInstance;

  if (options.useInstrumentationAPI || options.instrumentationOptions) {
    clientInstrumentationInstance = createClientInstrumentation.createSentryClientInstrumentation(options.instrumentationOptions);
  }

  const getClientInstrumentation = () => {
    if (!clientInstrumentationInstance) {
      clientInstrumentationInstance = createClientInstrumentation.createSentryClientInstrumentation(options.instrumentationOptions);
    }
    return clientInstrumentationInstance;
  };

  return {
    ...browserTracingIntegrationInstance,
    name: 'ReactRouterTracingIntegration',
    afterAllSetup(client) {
      browserTracingIntegrationInstance.afterAllSetup(client);
      hydratedRouter.instrumentHydratedRouter();
    },
    get clientInstrumentation() {
      return getClientInstrumentation();
    },
  };
}

exports.reactRouterTracingIntegration = reactRouterTracingIntegration;
//# sourceMappingURL=tracingIntegration.js.map
