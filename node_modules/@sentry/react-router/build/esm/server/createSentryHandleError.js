import { captureException, flushIfServerless } from '@sentry/core';

/**
 * A complete Sentry-instrumented handleError implementation that handles error reporting
 *
 * @returns A Sentry-instrumented handleError function
 */
function createSentryHandleError({ logErrors = false }) {
  const handleError = async function handleError(error, args) {
    // React Router may abort some interrupted requests, don't report those
    if (!args.request.signal.aborted) {
      captureException(error, {
        mechanism: {
          type: 'react-router',
          handled: false,
        },
      });
      if (logErrors) {
        // eslint-disable-next-line no-console
        console.error(error);
      }
      try {
        await flushIfServerless();
      } catch {
        // Ignore flush errors to ensure error handling completes gracefully
      }
    }
  };

  return handleError;
}

export { createSentryHandleError };
//# sourceMappingURL=createSentryHandleError.js.map
